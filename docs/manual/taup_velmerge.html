<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>TauP VelocityMerge &#8212; TauP 3.0.0-SNAPSHOT10 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=a66d8bb5" />
    <script src="_static/documentation_options.js?v=95eb0a88"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="TauP VelocityPlot" href="taup_velplot.html" />
    <link rel="prev" title="TauP SetSac" href="taup_setsac.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/taupLogo.svg" alt="Logo" />
    
  </a>
</p>



<p class="blurb">Flexible Seismic Travel-Time and Raypath Utilities. Version 3.0.0-SNAPSHOT10</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=crotwell&repo=taup&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="distribution.html">Distribution</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tools.html">Tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="default_params.html">Default Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="taup_time.html">TauP Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="taup_pierce.html">TauP Pierce</a></li>
<li class="toctree-l2"><a class="reference internal" href="taup_path.html">TauP Path</a></li>
<li class="toctree-l2"><a class="reference internal" href="taup_distaz.html">TauP Distaz</a></li>
<li class="toctree-l2"><a class="reference internal" href="taup_find.html">TauP Find</a></li>
<li class="toctree-l2"><a class="reference internal" href="taup_curve.html">TauP Curve</a></li>
<li class="toctree-l2"><a class="reference internal" href="taup_phase.html">TauP Phase</a></li>
<li class="toctree-l2"><a class="reference internal" href="taup_table.html">TauP Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="taup_setms3.html">TauP SetMS3</a></li>
<li class="toctree-l2"><a class="reference internal" href="taup_setsac.html">TauP SetSac</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">TauP VelocityMerge</a></li>
<li class="toctree-l2"><a class="reference internal" href="taup_velplot.html">TauP VelocityPlot</a></li>
<li class="toctree-l2"><a class="reference internal" href="taup_discon.html">TauP Discon</a></li>
<li class="toctree-l2"><a class="reference internal" href="taup_refltrans.html">TauP ReflTrans</a></li>
<li class="toctree-l2"><a class="reference internal" href="taup_wavefront.html">TauP Wavefront</a></li>
<li class="toctree-l2"><a class="reference internal" href="taup_spikes.html">TauP Spikes</a></li>
<li class="toctree-l2"><a class="reference internal" href="taup_create.html">TauP Create</a></li>
<li class="toctree-l2"><a class="reference internal" href="taup_web.html">TauP Web</a></li>
<li class="toctree-l2"><a class="reference internal" href="taup_version.html">TauP Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="taup_help.html">TauP Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html#startup-script">Startup Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html#tab-completion">Tab Completion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="calculations.html">Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="phaseNaming.html">Phases</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html">Velocity Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="distances.html">Rays and Distances</a></li>
<li class="toctree-l1"><a class="reference internal" href="programming.html">Programmatic Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/crotwell/TauP">Source</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="tools.html">Tools</a><ul>
      <li>Previous: <a href="taup_setsac.html" title="previous chapter">TauP SetSac</a></li>
      <li>Next: <a href="taup_velplot.html" title="next chapter">TauP VelocityPlot</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="taup-velocitymerge">
<span id="taup-velmerge"></span><h1>TauP VelocityMerge<a class="headerlink" href="#taup-velocitymerge" title="Link to this heading">¶</a></h1>
<p>TauP VelocityMerge overlays a partial velocity model over the given base
velocity model. This makes is easy to overlay a new crust and
upper mantle structure on an existing global model.</p>
<p>One common source of errors with cusom models is users forgetting that TauP
requires a full earth model because the radius of the earth is given by
the deepest sample in the velocity model. A model file that shows depths
only down to 30 kilometers may look like a model of the crust of the earth,
but TauP will assume your planet has a radius of only 30 kilometers, so
something more like asteroid seismology. In order to calculate even just
crustal phases, you will need layers between the crust and the center of
the earth.</p>
<p>For example
if dumbcrust.nd contains:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">0.0</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">4</span>
<span class="mf">5.0</span> <span class="mf">3.1</span> <span class="mf">2.1</span> <span class="mi">4</span>
<span class="mf">21.0</span> <span class="mf">3.2</span> <span class="mf">2.2</span> <span class="mi">4</span>
<span class="n">mantle</span>
<span class="mf">21.0</span> <span class="mf">8.1</span> <span class="mf">4.4</span> <span class="mf">3.3</span>
<span class="mf">30.0</span> <span class="mf">8.1</span> <span class="mf">4.4</span> <span class="mf">3.3</span>
</pre></div>
</div>
<p>then we need to paste a model like prem beneath it. So running
<code class="code docutils literal notranslate"><span class="pre">taup</span> <span class="pre">velmerge</span> <span class="pre">--mod</span> <span class="pre">prem</span> <span class="pre">--ndmerge</span> <span class="pre">dumbcrust.nd</span> <span class="pre">-o</span> <span class="pre">prem_dumbcrust.nd</span></code></p>
<p>would create a velocity model called prem_dumbcrust that contained the layers
from our model and then prem below to give a model radius of 6371 kilometers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">0.0</span> <span class="mf">3.0</span> <span class="mf">2.0</span> <span class="mf">4.0</span>
<span class="mf">5.0</span> <span class="mf">3.1</span> <span class="mf">2.1</span> <span class="mf">4.0</span>
<span class="mf">21.0</span> <span class="mf">3.2</span> <span class="mf">2.2</span> <span class="mf">4.0</span>
<span class="n">mantle</span>
<span class="mf">21.0</span> <span class="mf">8.1</span> <span class="mf">4.4</span> <span class="mf">3.3</span>
<span class="mf">30.0</span> <span class="mf">8.1</span> <span class="mf">4.4</span> <span class="mf">3.3</span>
<span class="mf">30.0</span> <span class="mf">8.107228461538462</span> <span class="mf">4.488757435897436</span> <span class="mf">3.3801497435897434</span>
<span class="mf">40.0</span> <span class="mf">8.10119</span> <span class="mf">4.48486</span> <span class="mf">3.37906</span>
<span class="mf">60.0</span> <span class="mf">8.08907</span> <span class="mf">4.47715</span> <span class="mf">3.37688</span>
<span class="o">...</span>
<span class="mf">6271.0</span> <span class="mf">11.26064</span> <span class="mf">3.6667</span> <span class="mf">13.0863</span>
<span class="mf">6371.0</span> <span class="mf">11.2622</span> <span class="mf">3.6678</span> <span class="mf">13.08848</span>
</pre></div>
</div>
<p>If the discontinuity at 30 km depth is not desired, the –smbot argument will
create a smooth transition from the bottom of the new model to the first depth
sample in the base model. Care should be taken with named discontinuities
if they are
different in the merged model by making sure there is enough
depth in the merge to cover the named in both models. The merge
model does not have to start at the surface, it can be just a
range of depths.</p>
<p>The usage is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Usage: taup velmerge [--debug] [--help] [--smoothbot] [--smoothtop] [--verbose]
                     [--elev=&lt;elevation&gt;] [-o=&lt;outFile&gt;]
                     [--prop=&lt;toolPropsFilename&gt;] (--mod=&lt;modelName&gt; |
                     --nd=&lt;nDModelFilename&gt; | --tvel=&lt;tvelModelFilename&gt;)
                     (--modmerge=&lt;modelName&gt; | --ndmerge=&lt;nDModelFilename&gt; |
                     --tvelmerge=&lt;tvelModelFilename&gt;)
Merge part of one model into another.

Options:

      --debug              enable debugging output
      --elev=&lt;elevation&gt;   increase topmost layer by elevation (meters)
      --help               display this help message
  -o, --output=&lt;outFile&gt;   output to file, default is stdout.
      --prop=&lt;toolPropsFilename&gt;
                           load defaults from properties file
      --smoothbot          smooth merge at bottom
      --smoothtop          smooth merge at top
      --verbose            enable verbose output
Base Velocity Model
      --mod, --model=&lt;modelName&gt;
                           use velocity model &quot;modelname&quot; for calculations,
                             format is guessed.
      --nd=&lt;nDModelFilename&gt;
                           &quot;named discontinuities&quot; velocity file
      --tvel=&lt;tvelModelFilename&gt;
                           &quot;.tvel&quot; velocity file, ala ttimes
Merge Velocity Model
      --modmerge=&lt;modelName&gt;
                           velocity file to merge, format is guessed
      --ndmerge=&lt;nDModelFilename&gt;
                           &quot;named discontinuities&quot; velocity file to merge
      --tvelmerge=&lt;tvelModelFilename&gt;
                           &quot;.tvel&quot; velocity file to merge, ala ttimes
</pre></div>
</div>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div> 
    <div class="footer">
      &#169;2024, Philip Crotwell.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.3.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/taup_velmerge.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    

  <style>
    @media screen and (min-width: 876px) {
      div.body { max-width: 95%;}
      div.document { width: unset;}
      div.sphinxsidebar { margin-left: 10px; margin-right: 10px;}
    }
  </style>


  </body>
</html>